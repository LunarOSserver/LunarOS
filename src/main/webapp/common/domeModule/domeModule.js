"use strict";!function(o){var n=angular.module("LunarModule",[]);n.config(["$httpProvider",function(o){o.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",o.interceptors.push(["$rootScope","$q",function(o,n){return{responseError:function(o){o.config.ignore401||401!==o.status||(location.href="/login/login.html?redirect="+encodeURIComponent(location.href))},response:function(o){return o.config.notIntercept?o:o.data.resultCode&&200!=o.data.resultCode?n.reject(o):o||n.resolve(o)}}}])}]),n.factory("$LunarPublic",["$modal",function(o){var n={},t=function(){this.isLoading=!1,this.loadingItems={}};return t.prototype={startLoading:function(o){this.loadingItems[o]=!0,this.isLoading||(this.isLoading=!0)},finishLoading:function(o){var n=this,t=!1;n.loadingItems[o]=!1,angular.forEach(n.loadingItems,function(o){o&&!t&&(t=!0)}),n.isLoading=t}},n.getLoadingInstance=function(){return new t},n}]),n.factory("$publicApi",["$http",function(o){var n={};return n.getLunarVersion=function(){return o.get("/api/global/version")},n.getDbConfig=function(){return o.get("/api/global/database")},n.getCurrentUser=function(){return o.get("/api/user/get")},n.modifyUserInfo=function(n){return o.post("/api/user/modify",angular.toJson(n))},n.logout=function(){location.href="/api/user/logout?from="+encodeURIComponent(location.protocol+"//"+location.host)},n}]),o.LunarModule=n}(window);