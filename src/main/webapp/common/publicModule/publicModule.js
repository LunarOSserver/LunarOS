"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e){var t=angular.module("publicModule",[]);t.service("$util",["$q",function(t){var r=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i=function(e){if(n(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},o=function(t){var r=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=e.location.search.substr(1).match(r);return null!==n?unescape(n[2]):null},a=function(e,t){if(null!==e&&!isNaN(e))return+parseFloat(e).toFixed(t)},l=function(e,t){if(null!==e&&!isNaN(e)){switch(t){case"MB":e=(+e/1024/1024).toFixed(2);break;case"GB":e=(+e/1024/1024/1024).toFixed(2);break;case"KB":e=(+e/1024).toFixed(2);break;default:e=e.toFixed(2)}return+e}},c=function(e){if(null!==e&&!isNaN(e)){var t=void 0;return e>=0&&e<1024?t=e.toFixed(2)+"MB":e>=1024&&(t=(e/1024).toFixed(2)+"GB"),t}},u=function(e,t){for(var r=void 0,n=new RegExp("{#([a-zA-z0-9]+)}");null!==(r=n.exec(e));){var i=0===t[r[1]]?"0":t[r[1]]||"";e=e.replace(new RegExp(r[0],"g"),i)}return e},s=function(e,t){e=new Date(e),e.setDate(e.getDate()+t);var r=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return n<10&&(n="0"+n),i<10&&(i="0"+i),r+"-"+n+"-"+i},f=function(e,t,r){var n={};void 0===t&&(t=(new Date).getTime());var i=t-e;return n.day=Math.floor(i/864e5),i-=24*n.day*3600*1e3,n.hours=Math.floor(i/36e5),i-=3600*n.hours*1e3,n.mimutes=Math.floor(i/6e4),r&&(i-=60*n.mimutes*1e3,n.seconds=Math.floor(i/1e3)),n};return{isEmptyObject:i,isArray:r,isObject:n,parseTpl:u,toDecimal:a,formartBytesData:l,formatMBytesData:c,getQueryString:o,calculateDate:s,getPageInterval:function(e,t){var r="",n=void 0;return!e||!t||t-e<=0?r="0秒":(n=f(e,t,!0),0!==n.day&&(r+=n.day+"天"),0!==n.hours&&(r+=n.hours+"小时"),0!==n.mimutes&&(r+=n.mimutes+"分钟"),0!==n.seconds&&(r+=n.seconds+"秒"),""===r&&(r="0秒")),r},getDateInterval:f,getPageDate:function(e,t,r){if(!e&&!t||e-t<=0)return"无";var n=f(e,t,r),i=n.day,o=n.hours,a=n.mimutes;return i<0||o<0||a<0?"刚刚":i>60?"更早":i>30?"一个月前":i>3?i+"天前":3==i?"三天前":2==i?"两天前":1==i?"昨天":o>=1?o+"小时前":0===a?"刚刚":a+"分钟前"},loadJs:function(e){var r=t.defer();return $.getScript(e,function(){r.resolve()}),r.promise},Base64:{encode:function(e){return btoa(unescape(encodeURIComponent(e)))},decode:function(e){return decodeURIComponent(escape(atob(e)))}}}}]).factory("$LunarModel",["$http",function(e){var t=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=e,o=[].concat(r),a=0,l=o.length;a<l;a++)i+="/"+o[a];return i};return{SelectListModel:function(){function e(t){_classCallCheck(this,e),this.selectListName=t?t:"selectList",this.isCheckAll=!1,this.selectedCount=0,this[this.selectListName]=[]}return _createClass(e,[{key:"init",value:function(e,t){var r=this;this.isCheckAll=!1,this.selectedCount=0,this[this.selectListName]=function(){if(e&&0!==e.length){if("[object Object]"===Object.prototype.toString.call(e[0])){var n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;c.keyFilter=!0,void 0!==t&&(c.isSelected=t),c.isSelected&&r.selectedCount++}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}else for(var u=0,s=e.length;u<s;u++)e[u]={item:e[u],keyFilter:!0,isSelected:t},void 0!==t&&(e[u].isSelected=t),e[u].isSelected&&r.selectedCount++;return r.selectedCount===e.length&&(r.isCheckAll=!0),e}return[]}()}},{key:"toggleCheck",value:function(e,t){var r=!0;if(e.isSelected=t,t){this.selectedCount++;var n=this[this.selectListName],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if(u.keyFilter&&!u.isSelected){r=!1;break}}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}r&&(this.isCheckAll=!0)}else this.selectedCount--,this.isCheckAll=!1}},{key:"checkAllItem",value:function(e){this.isCheckAll=void 0===e?this.isCheckAll:e,this.selectedCount=0;var t=this[this.selectListName],r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;l.keyFilter&&this.isCheckAll?(l.isSelected=!0,this.selectedCount++):l.isSelected=!1}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}},{key:"filterWithKey",value:function(e,t){this.isCheckAll=!1,this.selectedCount=0,void 0===t&&(t="item");var r=this[this.selectListName];if(void 0!==r[0][t]){var n=!0,i=!1,o=void 0;try{for(var a,l=r[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;c.isSelected=!1,c.keyFilter=c[t].indexOf(e)!==-1}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}}}]),e}(),ServiceModel:function(r){this.getData=function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e.get(t.apply(void 0,[r].concat(i)))},this.setData=function(t,n){return e.post(r,t,n)},this.updateData=function(t){return e.put(r,t)},this.deleteData=function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e.delete(t.apply(void 0,[r].concat(i)))}},instancesCreator:function(e){return e||(e={}),function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=void 0,a=e[t];return"function"==typeof a?o=new(Function.prototype.bind.apply(a,[null].concat(n))):(o={},console.log("error:there is no "+t)),o}}}}]).provider("$LunarData",function(){var e={},t=function(t,r){e[t]=r},r=function(t){return e[t]},n=function(t){e[t]&&(e[t]=null)};return{setData:t,$get:function(){return{setData:t,getData:r,delData:n}}}}),e.publicModule=t}(window);