"use strict";!function(t,e){void 0!==t&&t.factory("$LunarAppStore",["$http","$LunarDeploy",function(t,e){var a=function(){return t.get("//app-Lunaros.bjctc.scs.sohucs.com/apps.json",{notIntercept:!0})},r=function(){};return r.prototype={init:function(t){this.config=t,this.formartToDeploy()},formartToDeploy:function(){var t={};t=angular.copy(this.config.deploymentTemplate),t.deployName=this.config.appName+parseInt(1e4*Math.random()),this.deployIns=e.getInstance("Deploy",t)}},{getStoreApps:a,getInstance:function(t,e){var a;switch(t){case"AppInfo":a=new r;break;default:a={},a.init=function(){console.log("error:there is no "+t)}}return a.init(e),a}}}]).factory("$LunarGlobal",["$http","dialog","$q",function(t,e,a){var r=function(r){var n=function(){var t;switch(r){case"ldap":t="/api/global/ldapconfig";break;case"server":t="/api/global/serverconfig";break;case"git":t="/api/global/gitconfig";break;case"gitUser":t="/api/global/gitconfig/user";break;case"registry":t="/api/global/registry/private";break;case"monitor":t="/api/global/monitor";break;case"ssh":t="/api/global/webssh";break;case"cluster":t="/api/global/ci/cluster";break;default:t=""}return t}(),o=!0;this.getData=function(){var e=a.defer();return t.get(n).then(function(t){!t.data.result||"git"==r&&0===t.data.result.length?e.reject():(o=!1,e.resolve(t.data.result))},function(t){e.reject(t.data.resultMsg)}),e.promise},this.modifyData=function(i){var s=a.defer(),c=function(t){"cluster"!==r&&e.alert("提示",t)},l=function(t){e.error("保存失败！","Message:"+t)};return"git"===r&&void 0!==i.id&&(o=!1),o||"registry"===r?t.post(n,angular.toJson(i)).then(function(t){o=!1,c("添加成功！"),s.resolve(t.data.result)},function(t){l(t.data.resultMsg),s.reject()}):t.put(n,angular.toJson(i)).then(function(t){c("保存成功！"),s.resolve(t.data.result)},function(t){l(t.data.resultMsg),s.reject()}),s.promise},this.deleteData=function(e){return t.delete(n+"/"+e)}};return{getGloabalInstance:function(t){return new r(t)}}}])}(angular.module("LunarApp"));