<div class="mod-group create-project-collection" ng-form="ng-form" name="projectCollectionFrom" ng-class="{'need-valid':needValid}" novalidate="novalidate"><loading ng-if="isWaitingCreate"></loading><ul class="info-list group-info com-list-info"><li class="has-border"><span class="info-name">项目名称 <span class="require-domain">*</span></span><div class="info-content info-content-lg-height"><p class="txt-prompt">项目名称会作为docker镜像的一部分，创建后不可修改，请慎重选择项目名称。</p><div class="line-long"><input class="ui-input-fill line-element" ng-model="projectCollection.name" name="projectCollectionName" placeholder="不能有大写字母，不能以中横线开头和结尾" required="required" ng-pattern="/^[a-z0-9]+([._-][a-z0-9]+)*$/" ng-model-options="{updateOn:'default blur',debounce:{default:500,blur:0}}" is-project-collection-exist="is-project-collection-exist"/></div><span class="txt-error" ng-if="(needValid||projectCollectionFrom.projectCollectionName.$dirty)&amp;&amp;projectCollectionFrom.projectCollectionName.$error.required">必填</span><span class="txt-error" ng-if="(needValid||projectCollectionFrom.projectCollectionName.$dirty)&amp;&amp;!projectCollectionFrom.projectCollectionName.$error.required&amp;&amp;projectCollectionFrom.projectCollectionName.$error.pattern">非法的名称</span><span class="txt-error" ng-if="(needValid||projectCollectionFrom.projectCollectionName.$dirty)&amp;&amp;!projectCollectionFrom.projectCollectionName.$error.required&amp;&amp;!projectCollectionFrom.projectCollectionName.$error.pattern&amp;&amp;projectCollectionFrom.projectCollectionName.$invalid&amp;&amp;projectCollectionFrom.projectCollectionName.$error.isProjectCollectionExist">项目名已存在</span></div></li><li class="has-border"><span class="info-name info-name-sm">项目描述</span><div class="info-content"><div class="line-long"><textarea class="info-txt ui-input-fill line-element" ng-model="projectCollection.description" name="projectDescription" placeholder="输入项目描述"></textarea></div></div></li><li class="has-border"><span class="info-name">公开项目</span><div class="info-content"><Lunar-toggle ng-class="{'on':isPublic}" ng-click="isPublic=!isPublic"></Lunar-toggle><span class="tip txt-prompt">项目公开后对所有用户可见</span><span class="tool-next"><a class="icon-help" tooltip="项目公开后所有用户均能查看项目信息和该项目下工程信息，并启动工程构建，但无法编辑或者删除项目和该项目下的工程"></a></span></div></li><li><span class="info-name">项目成员</span><div class="info-content"><div class="line-long"><div class="com-select-con line-element" select-con="select-con" label="true"><ul class="selected-labels"><li class="select-label" ng-repeat="user in selectedUsers" ng-cloak="ng-cloak"><a class="icon-cancle icon-cancle-former" ng-click="cancelUser($index)"></a>{{user.username}}</li><li class="select-input"><input class="line-element ui-btn-select" placeholder="搜索成员" ng-model="userKey.key" ng-keydown="userKeyDown($event,userKey.key,userListFiltered[0])"/></li></ul><ul class="select-list"><li ng-if="!userList||userListFiltered.length===0"><a>无相关用户信息</a></li><li class="select-item" ng-repeat="user in userListFiltered=(userList| filter:{'username':userKey.key})"><a ng-bind="user.username" ng-click="selectUser(user.id,user.username);"></a></li></ul></div></div><div class="line-long line-member"><div class="com-select-con line-element" select-con="select-con"><button class="ui-btn ui-btn-select ui-btn-white line-element-sm" ng-cloak="ng-cloak"><i class="icon-down"></i>{{role}}</button><ul class="select-list"><li class="select-item"><a ng-click="toggleRole('MASTER')">MASTER</a></li><li class="select-item"><a ng-click="toggleRole('DEVELOPER')">DEVELOPER</a></li><li class="select-item"><a ng-click="toggleRole('REPORTER')">REPORTER</a></li></ul></div><button class="ui-btn ui-btn-sm ui-btn-bright ui-btn-add" ng-click="addUser()">添加</button></div><div class="line-long"><table class="ui-table-primary"><thead><tr><th style="width:40%;">成员名称</th><th>项目权限</th><th></th></tr></thead><tbody><tr><td ng-bind="myself.username"></td><td ng-bind="myself.role"></td><td></td></tr><tr ng-repeat="user in selectedUsersList"><td ng-bind="user.username"></td><td><div class="com-select-con" select-con="select-con"><button class="ui-btn ui-btn-white ui-btn-select" ng-cloak="ng-cloak"><i class="icon-down"></i>{{user.role}}</button><ul class="select-list"><li class="select-item"><a ng-click="user.role='MASTER'">MASTER</a></li><li class="select-item"><a ng-click="user.role='DEVELOPER'">DEVELOPER</a></li><li class="select-item"><a ng-click="user.role='REPORTER'">REPORTER											</a></li></ul></div></td><td><button class="ui-btn-none fa fa-trash-o icon-trash-color" ng-click="deleteUser($index)"></button></td></tr></tbody></table></div></div></li></ul><div class="com-bottom-option"><span class="com-bottom-option-con"><button class="ui-btn ui-btn-sm ui-btn-bright" ui-sref="projectCollectionManage">取消</button><button class="ui-btn ui-btn-lg ui-btn-bright" ng-disabled="isWaitingCreate" ng-click="needValid=true;projectCollectionFrom.$valid&amp;&amp;createProjectCollection()">完成创建</button><span class="txt-error" ng-if="needValid&amp;&amp;projectCollectionFrom.$invalid">您有不合法数据，请修改后重试。</span></span></div></div>